(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{48:function(e,t,n){},79:function(e,t,n){},82:function(e,t,n){},85:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(42),a=n.n(s),i=n(9),o=(n(48),n(49),n(79),n(0));var l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},d=n(2),j=n(43),h=n(15),b=n.n(h),u=(n(82),null),m=!1;function g(e){if(m)b()("It's the other player's turn!");else{var t=parseInt(e/7);u.send(JSON.stringify({command:"move",username:localStorage.username,id:localStorage.id,mark:localStorage.mark,row:t,side:"r"})),m=!0}}function x(e){if(m)b()("It's the other player's turn!");else{var t=parseInt(e/7);u.send(JSON.stringify({command:"move",username:localStorage.username,id:localStorage.id,mark:localStorage.mark,row:t,side:"l"})),m=!0}}function O(e){if(e)for(var t=-1,n=0;n<e.length;n++)for(var c=0;c<e[n].length;c++)t+=1,1==e[n][c]?document.getElementById("cell_"+t)&&(document.getElementById("cell_"+t).src="circle.png"):2==e[n][c]?document.getElementById("cell_"+t)&&(document.getElementById("cell_"+t).src="x.png"):document.getElementById("cell_"+t)&&(document.getElementById("cell_"+t).src="blank.png")}function f(){u.send(JSON.stringify({command:"reset",id:localStorage.id}))}var p=function(){var e=Object(d.g)();fetch("http://localhost:3001/game",{method:"POST",body:JSON.stringify({user_a:localStorage.user_a,user_b:localStorage.user_b}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){localStorage.id=e.id,localStorage.user_a=e.user_a,localStorage.user_b=e.user_b,localStorage.board=e.board,localStorage.username==e.user_a?localStorage.mark=1:localStorage.mark=2})),(u=new WebSocket("ws://localhost:3002")).onopen=function(){},u.onmessage=function(e){var t=JSON.parse(e.data);t.id==localStorage.id&&(t.board&&O(t.board),t.mark!=localStorage.mark&&(m=!1),t.winner_mark&&(t.winner_mark==localStorage.mark?(b()("You win!!!"),f()):(b()("You lose :("),f())))},u.onclose=function(){},u.onerror=function(e){},m=!1,setTimeout((function(){O(JSON.parse(localStorage.board))}),0);var t=localStorage.user_a,n=localStorage.user_b;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{className:"user_a",children:t}),Object(o.jsx)("p",{className:"user_b",children:n}),Object(o.jsx)("h3",{className:"text-center text-white pt-3",children:"Side-Stacker Game"}),Object(o.jsxs)("div",{className:"wrapper",children:[Object(o.jsx)("div",{className:"top",children:Object(o.jsxs)("div",{className:"wrapper-inner",children:[Object(o.jsx)("div",{className:"box-inner"}),[1,2,3,4,5,6,7].map((function(e,t){return Object(o.jsx)("div",{className:"box-inner",children:e},t)})),Object(o.jsx)("div",{className:"box-inner"})]})}),Object(j.a)(Array(49)).map((function(e,t){return function(e){var t="cell_"+e;return-1!=[0].indexOf(e)?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"box-left",onClick:function(){return x(e)},children:Object(o.jsx)("img",{src:"right.png",width:"24",height:"24"})}),Object(o.jsx)("div",{className:"box-dark",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})})]}):-1!=[7,14,21,28,35,42].indexOf(e)?e%2==0?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"box-right",onClick:function(){return g(e-7)},children:Object(o.jsx)("img",{src:"left.png",width:"24",height:"24"})}),Object(o.jsx)("div",{className:"box-left",onClick:function(){return x(e+1)},children:Object(o.jsx)("img",{src:"right.png",width:"24",height:"24"})}),Object(o.jsx)("div",{className:"box-dark",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"box-right",onClick:function(){return g(e-7)},children:Object(o.jsx)("img",{src:"left.png",width:"24",height:"24"})}),Object(o.jsx)("div",{className:"box-left",onClick:function(){return x(e+1)},children:Object(o.jsx)("img",{src:"right.png",width:"24",height:"24"})}),Object(o.jsx)("div",{className:"box",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})})]}):-1!=[48].indexOf(e)?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"box-dark",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})}),Object(o.jsx)("div",{className:"box-right",onClick:function(){return g(e-6)},children:Object(o.jsx)("img",{src:"left.png",width:"24",height:"24"})})]}):e%2==0?Object(o.jsx)("div",{className:"box-dark",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})}):Object(o.jsx)("div",{className:"box",children:Object(o.jsx)("img",{id:t,src:"blank.png",width:"48",height:"48"})})}(t)})),Object(o.jsx)("div",{className:"bottom",children:Object(o.jsxs)("div",{className:"wrapper-inner",children:[Object(o.jsx)("div",{className:"box-inner"}),[1,2,3,4,5,6,7].map((function(e,t){return Object(o.jsx)("div",{className:"box-inner",children:e},t)})),Object(o.jsx)("div",{className:"box-inner"})]})})]}),Object(o.jsxs)("div",{className:"btn-reset",children:[Object(o.jsx)("button",{className:"btn btn-success",onClick:f,children:"Reset"}),Object(o.jsx)("button",{className:"btn btn-success btn-play",onClick:function(){return function(e){e("/users")}(e)},children:"Play with someone else"})]})]})},v=n(11);n(85);var S=function(){var e=Object(d.g)(),t=Object(c.useState)(null),n=Object(v.a)(t,2),r=n[0],s=n[1],a=Object(c.useState)(!1),i=Object(v.a)(a,2),l=i[0],j=i[1],h=Object(c.useState)(null),b=Object(v.a)(h,2),u=b[0],m=b[1];if(Object(c.useEffect)((function(){j(!0),fetch("http://localhost:3001/users").then((function(e){return e.json()})).then(s).then((function(){return j(!1)})).catch(m),new WebSocket("ws://localhost:3002").onmessage=function(e){var t=JSON.parse(e.data);t.users&&s(t.users)}}),[]),l)return Object(o.jsx)("h1",{children:"Loading..."});if(u)return Object(o.jsx)("pre",{children:JSON.stringify(u,null,2)});if(r){console.log(r);for(var g=[],x=0;x<r.length;x++)r[x].user!=localStorage.username&&g.push(r[x]);return 0==g.length?Object(o.jsx)("h3",{className:"text-center text-white pt-3",children:"There are no users to play, wait for it (or open a private window and play with yourself)."}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h3",{className:"text-center text-white pt-3",children:"Select user to play with"}),Object(o.jsx)("div",{id:"user-list",children:g.map((function(t,n){return Object(o.jsx)("div",{onClick:function(){return function(t){fetch("http://localhost:3001/game",{method:"POST",body:JSON.stringify({user_a:localStorage.username,user_b:t}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(t){localStorage.id=t.id,localStorage.user_a=t.user_a,localStorage.user_b=t.user_b,localStorage.board=t.board,localStorage.username==t.user_a?localStorage.mark=1:localStorage.mark=2,e("/game")}))}(t.user)},children:t.user},n)}))})]})}return Object(o.jsx)("div",{children:"no user available"})},N=null;var k=function(){N||(N=new WebSocket("ws://localhost:3002"));var e=Object(d.g)(),t=Object(c.useState)("username"),n=Object(v.a)(t,2),r=n[0],s=n[1];return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{id:"login",children:[Object(o.jsx)("h3",{className:"text-center text-white pt-3",children:"Welcome to Side-Stacker"}),Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{id:"login-row",className:"row justify-content-center align-items-center",children:Object(o.jsx)("div",{id:"login-column",className:"col-md-6",children:Object(o.jsx)("div",{id:"login-box",className:"col-md-12",children:Object(o.jsxs)("div",{id:"login-form",className:"form",action:"",method:"post",children:[Object(o.jsx)("h3",{className:"text-center text-info",children:"Login"}),Object(o.jsx)("img",{src:"triki.png",width:"100",height:"100",className:"triki-img"}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{for:"username",className:"text-info",children:"Username:"}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{onChange:function(e){return s(e.target.value)},type:"text",name:"username",id:"username",className:"form-control",placeholder:"any username"})]}),Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"form-group",children:Object(o.jsx)("button",{className:"btn btn-info btn-md white",onClick:function(){return function(e,t){localStorage.username=e,fetch("http://localhost:3001/login",{method:"POST",body:JSON.stringify({user:e}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(){t("users")})),N.send(JSON.stringify({command:"login",username:e}))}(r,e)},children:"Ingresar"})})]})})})})})]})})};var w=function(){return Object(o.jsx)("h1",{children:"Error pagina no encontrada"})};var y=function(){return Object(o.jsx)("div",{children:Object(o.jsxs)(d.c,{children:[Object(o.jsx)(d.a,{path:"/",element:Object(o.jsx)(k,{})}),Object(o.jsx)(d.a,{path:"/users",element:Object(o.jsx)(S,{})}),Object(o.jsx)(d.a,{path:"/game",element:Object(o.jsx)(p,{})}),Object(o.jsx)(d.a,{path:"/*",element:Object(o.jsx)(w,{})})]})})};n(86);document.title="",a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(i.a,{children:Object(o.jsx)(y,{})})}),document.getElementById("root")),l()}},[[87,1,2]]]);
//# sourceMappingURL=main.8a0d3e30.chunk.js.map